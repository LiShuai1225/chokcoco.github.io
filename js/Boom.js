(function(e,t){var o=false,r={position:"absolute",width:0,height:0,left:0,top:0,"z-index":9999},i="",n=function(e,t){return new n.prototype.init(e,t)},a=[],s=0,l={scaleLevel:3,blurLevel:3,boomLevel:4,boomTime:800,isOpenLog:false},f=[1,-4,8,-12,16,-20,24,-28,32];function u(t,r){if(o){return}var i=e.document.getElementsByTagName("script")[0],n=e.document.createElement("script");n.src=t;n.type="text/javascript";n.async=false;i.parentNode.insertBefore(n,i);if(r&&typeof r==="function"){n.onload=r}o=true}function h(){if(l.isOpenLog){console.log.apply(console,arguments)}}function p(e){var t=0;f=[];for(;t<9;t++){f[t]=e*t}h("arrRandomOffset is "+f)}function d(e){i=e.attr("src")||"";var t=e[0];var o=t.getBoundingClientRect(),n={width:t.width,height:t.height,top:o.top,left:o.left},a=$.extend(r,n);var s=$(document.createElement("div"));s.css(a);$("body").append(s);return s}function c(e){var t=e,o=e.width(),r=e.height(),n=10,a=0,s=0,f=0,u=0,p=0,d=[];h(o+","+r);if(o<=10&&r<=10){return}var c=o>r?r:o;h("base point is :"+c);if(c==o){f=Math.floor(o/n);s=Math.floor(r/f);a=n}else{f=Math.floor(r/n);s=Math.floor(o/f);a=n}h("widthNum:"+a+",height:"+s+",width:"+f);if(r>o){a=a*s;s=a/s;a=a/s}h("widthNum:"+a+",heightNum:"+s+",newElemWidth:"+f);for(;u<a;u++){for(;p<s;p++){var m=Math.random()*l.scaleLevel,y=Math.random()*l.blurLevel,x=document.createElement("div"),v=u*f,b=p*f,g={"background-image":"url("+i+")","background-repeat":"no-repeat","background-position":"-"+b+"px "+"-"+v+"px",position:"absolute",width:f,height:f,"border-radius":"100%",top:0,left:0,top:v,left:b,transform:"scale("+m+")","-webkit-filter":"blur("+y+"px)","-moz-filter":"blur("+y+"px)","-ms-filter":"blur("+y+"px)",filter:"blur("+y+"px)"};h("cssTop is:"+v+",cssLeft is:"+b+",posiElemCss:"+g);$(x).css(g);d.push(x)}p=0}h(d);e.append(d)}function m(e,t){var o=0,r=Math.random()*5,i=r*(e.x>e.y?e.x:e.y),n={x:0,y:0},a=e.y-t.y>0?1:0;if(e.x!=t.x&&e.y!=t.y){o=(e.y-t.y)/(e.x-t.x);var s=e.y-o*e.x,l=Math.random(),f=Math.random();h("斜率slope is:"+o+",b is:"+s+",distance is:"+i);n.y=2*t.y-e.y+(l>.5?l*4:-l*4);n.x=(n.y-s)/o+(f>.5?f*4:-f*4);return n}else if(e.x==t.x){if(e.y>t.y){return{x:e.x,y:e.y-i}}else{return{x:e.x,y:e.y+i}}}else if(e.y==t.y){if(e.x>t.x){return{x:e.x-i,y:e.y}}else{return{x:e.x+i,y:e.y}}}else{return}}n.prototype={init:function(e,o){var r=arguments.length;if(arguments[0]!==t){this.boom(e)}l=$.extend(l,o);h("argOptions is ");h(l);if(l.boomLevel!=4){p(l.boomLevel)}return this},boom:function(e){var t=e.length;if(!t){return}else{elem=e.eq(s++).css({opacity:"1"})}if(s==t){s=0}var o=Math.random()*2,r={x:Math.floor(elem.width()/2)+o,y:Math.floor(elem.height()/2)-o};var i=d(elem);elem.delay(200,"shake").queue("shake",function(e){$(this).animate({opacity:0},{duration:1}).removeClass("shake");e()}).dequeue("shake").addClass("shake").queue("shake",function(){c(i);var e=i.find("div"),t=e.length,o=0;for(;o<t;o++){var n=e.eq(o),a={x:parseInt(n.css("left")),y:parseInt(n.css("top"))};var s=m(r,a);h(s);var u=f[o%9];e.eq(o).animate({left:s.x+(Math.random()>.5?u:-u),top:s.y+(Math.random()>.5?u:-u),opacity:0},l.boomTime)}})}};n.prototype.init.prototype=n.prototype;e.boom=n})(window);